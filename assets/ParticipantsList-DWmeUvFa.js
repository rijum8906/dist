import{r as n,j as e,L as N}from"./index-D8XRboE_.js";import{a as C,g as w,B as m,c as s}from"./url-CMfFpYZi.js";const S=()=>{const[r,x]=n.useState([]),[d,h]=n.useState([]),[l,u]=n.useState({house:"",name:"",event:"",category:""}),[g,j]=n.useState(0);n.useEffect(()=>{C.get(w,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{x(t.data.participants),h(t.data.participants)}).catch(t=>console.error("Error fetching participants:",t))},[]),n.useEffect(()=>{const t=r.filter(a=>(l.house===""||a.house===l.house)&&(l.event===""||a.event===l.event)&&(l.category===""||a.category===l.category)&&(l.name===""||a.name.toLowerCase().includes(l.name.toLowerCase())));h(t),p(t)},[l,r]);const c=t=>{const{name:a,value:i}=t.target;u(o=>({...o,[a]:i}))},p=t=>{let a=0;t.forEach(i=>{const o=parseInt(i.rank,10);o===1?a+=10:o===2?a+=7:o===3&&(a+=5)}),j(a)},f=()=>{localStorage.removeItem("token"),window.location.reload()},v=[...new Set(r.map(t=>t.house))],y=[...new Set(r.map(t=>t.event))],b=[...new Set(r.map(t=>t.category))];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(N,{to:"/add",children:e.jsx(m,{children:"Add Participant"})}),e.jsx(m,{onClick:f,children:"Log Out"})]}),e.jsxs("div",{className:"my-4",children:[e.jsx("strong",{children:"Total Points:"})," ",g]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Filter by Name",className:"p-2 border border-gray-300 rounded",value:l.name,onChange:c}),e.jsxs("select",{name:"house",className:"p-2 border border-gray-300 rounded",value:l.house,onChange:c,children:[e.jsx("option",{value:"",children:"Filter by House"}),v.map((t,a)=>e.jsx("option",{value:t,children:t},a))]}),e.jsxs("select",{name:"event",className:"p-2 border border-gray-300 rounded",value:l.event,onChange:c,children:[e.jsx("option",{value:"",children:"Filter by Event"}),y.map((t,a)=>e.jsx("option",{value:t,children:t},a))]}),e.jsxs("select",{name:"category",className:"p-2 border border-gray-300 rounded",value:l.category,onChange:c,children:[e.jsx("option",{value:"",children:"Filter by Category"}),b.map((t,a)=>e.jsx("option",{value:t,children:t},a))]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(s,{className:"min-w-full bg-white rounded shadow-md",children:[e.jsxs(s.Head,{className:"bg-gray-100",children:[e.jsx(s.HeadCell,{className:"text-left font-semibold",children:"Name"}),e.jsx(s.HeadCell,{className:"text-left font-semibold",children:"House"}),e.jsx(s.HeadCell,{className:"text-left font-semibold",children:"Category"}),e.jsx(s.HeadCell,{className:"text-left font-semibold",children:"Event"}),e.jsx(s.HeadCell,{className:"text-left font-semibold",children:"Rank"})]}),e.jsx(s.Body,{className:"divide-y",children:d.length>0?d.map((t,a)=>e.jsxs(s.Row,{className:"bg-white dark:border-gray-700 dark:bg-gray-800",children:[e.jsx(s.Cell,{className:"whitespace-nowrap font-medium text-gray-900 dark:text-white",children:t.name}),e.jsx(s.Cell,{children:t.house}),e.jsx(s.Cell,{children:t.category}),e.jsx(s.Cell,{children:t.event}),e.jsx(s.Cell,{children:t.rank})]},a)):e.jsx(s.Row,{children:e.jsx(s.Cell,{colSpan:"5",className:"text-center py-4",children:"No participants found."})})})]})})]})};export{S as default};
